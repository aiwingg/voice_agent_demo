# Voice Agent Demo

This application demonstrates a voice agent using the Retell AI SDK.

## Configuration

### Company Mapping

The application supports multiple companies with different agents and languages. All configurations are stored in `config.js` at the root of the project. This is the only file you need to edit to update company settings.

Example format:
```javascript
// Format: {company_id: [agent_id, language, company_name]}
const COMPANIES = {
  '123': ['agent_d1b78ff3f73322fc34dd89abb5', 'ru', 'Крокус ООО'],
  '456': ['agent_d1b78ff3f73322fc34dd89abb5', 'en', 'Flower Tech'],
  '789': ['agent_d1b78ff3f73322fc34dd89abb5', 'ru', 'ТД Восток']
};
```

To add a new company:
1. Edit only the root `config.js` file
2. Add a new entry to the `COMPANIES` object with the format: `'company_id': ['agent_id', 'language', 'company_name']`
3. Run `npm run sync-config` to sync changes to the client-side config
4. Restart the server or rebuild the client as needed

### URL Parameters

Access different companies by adding a company_id to the URL:
```
https://your-app.com/?company_id=123
```

## Scripts

- `npm start` - Starts the server (automatically syncs config first)
- `npm run sync-config` - Syncs config.js with client/src/config.js
- `npm run build:client` - Syncs config and builds the client for production

## Heroku Deployment

This app is set up for easy deployment to Heroku:

1. Create a Heroku app and connect your repository

2. Deploy using:
```
git push heroku main
```

The Procfile is already configured to run `npm start`, which will:
1. Sync the config files
2. Start the Node.js server that serves the React app

To update company configurations on Heroku:
1. Edit `config.js` locally
2. Commit your changes
3. Push to Heroku
4. The `heroku-postbuild` script automatically runs `sync-config` and rebuilds the client

## Development

### Server (Express)

The server endpoints are defined in `server.js`. It handles API requests and serves the React app.

### Client (React)

The React application is in the `/client` directory. It communicates with the server API.

### Configuration Flow

1. Edit `config.js` (root)
2. Run `npm run sync-config` (Automatic during npm start)
3. The changes will be reflected in both frontend and backend

This ensures you only need to maintain one configuration file.
